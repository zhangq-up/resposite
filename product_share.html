<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>郑州银行分享页面</title>
	</head>
	<style type="text/css">
		.p-15 {
			padding: 15px;
		}
		.wid100{
			width: 100%;
		}
		#WeChatAndroid {
			display: none;
		}
		#WeChatios {
			display: none;
		}
		.btn {
			text-align: center;
			margin-top: 300px;
		}
		.btn-span {
			display: inline-block;
			padding: 20px 100px;
			background: orange;
			border-radius: 40px;
			font-size: 36px;
		}
	</style>
	<body>
		<div>  
			<div class="p-15" id="guide">
				<img src="./downLoadImg.png" class="wid100" id="WeChatAndroid" />
				<img src="./downLoadWeChat.png" class="wid100" id="WeChatios" />
			</div>
			<div class="btn" id="main">
				<span class="btn-span" id="btn">郑州银行APP</span>
			</div>
		</div>
	</body>
	<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
	<script type="text/javascript">
		var WeChatAndroid = document.getElementById("WeChatAndroid");
		var WeChatios = document.getElementById("WeChatios");
		var guide = document.getElementById("guide");
		var main = document.getElementById("main");
		
		var ua = navigator.userAgent.toLowerCase();  
		var isWeixin = ua.indexOf('micromessenger') != -1;  //微信端
		var u = navigator.userAgent;
		var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
		var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
		if (isWeixin) {
			guide.style.display = "block";
			main.style.display = "none";
			if(isAndroid){
				WeChatAndroid.style.display = "block";
				WeChatios.style.display = "none";
			}
			if(isiOS){
				WeChatios.style.display = "block";
				WeChatAndroid.style.display = "none";
			}
		}else{
			guide.style.display = "none";
			main.style.display = "block";
			WeChatAndroid.style.display = "none";
			WeChatios.style.display = "none";
		}  
		
		var btn = document.getElementById("btn");
		document.getElementById("btn").onclick = openApp;
		function openApp() {
		    // 通过iframe的方式试图打开APP，如果能正常打开，会直接切换到APP
		    // 每个APP有自己scheme协议名称，例如微信是weixin:// 
		    // 否则跳转APP下载页
			location.href="zzbk://zz_financial/financial/financial_detail.html" + window.location.search;
		    window.setTimeout(function(){
		        downloadAPP()
		    },2000)
		}
		
		function downloadAPP() {
			// 判断是Android还是iOS
			if(isAndroid){
				window.location = "https://sj.qq.com/myapp/detail.htm?apkName=com.zzbank.mobile.bank"
			}
			if(isiOS){
				window.location = "https://apps.apple.com/cn/app/id571831520"
			}
			
//		    const u = navigator.userAgent;
//		    let system = '';
//		    if (u.indexOf('Android') > -1 || u.indexOf('Adr') > -1) {
//		        system = 'Android';
//		    } else if (!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)) {
//		        system = 'iOS';
//		    } else {
//		        system = 'unknown';
//		    }
//		    // 根据系统不同，跳转不同的下载APP地址
//		    if(system === 'Android') {
//		        window.location = "https://sj.qq.com/myapp/detail.htm?apkName=com.zzbank.mobile.bank"
//		    } else if(system === 'iOS') {
//		        window.location = "https://apps.apple.com/cn/app/id571831520"
//		    }
		}
	</script>
</html>

