<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>郑州银行分享页面</title>
	</head>
	<style type="text/css">
		.btn {
			text-align: center;
			margin-top: 300px;
		}
		.btn-span {
			display: inline-block;
			padding: 20px 100px;
			background: orange;
			border-radius: 40px;
			font-size: 36px;
		}
	</style>
	<body>
		<div>  
			<div class="btn">
				<span class="btn-span" id="btn">郑州银行APP</span>
			</div>
		</div>
	</body>
	<script type="text/javascript">
		var btn = document.getElementById("btn");
		document.getElementById("btn").onclick = openApp;
		function openApp() {
		    // 通过iframe的方式试图打开APP，如果能正常打开，会直接切换到APP
		    // 每个APP有自己scheme协议名称，例如微信是weixin:// 
		    // 否则跳转APP下载页
//		    var ifr = document.createElement('iframe');
//		    ifr.src = "zzbk://zz_financial/financial/financial_detail.html" + window.location.search;
//		    ifr.style.display = 'none';
			location.href="zzbk://zz_financial/financial/financial_detail.html" + window.location.search;
//		    document.body.appendChild(ifr);
		    window.setTimeout(function(){
		        downloadAPP()
//		        document.body.removeChild(ifr);
		    },2000)
		}
		
		function downloadAPP() {
		    // 判断是Android还是iOS
		    const u = navigator.userAgent;
		    let system = '';
		    if (u.indexOf('Android') > -1 || u.indexOf('Adr') > -1) {
		        system = 'Android';
		    } else if (!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)) {
		        system = 'iOS';
		    } else {
		        system = 'unknown';
		    }
		    // 根据系统不同，跳转不同的下载APP地址
		    if(system === 'Android') {
		        window.location = "https://sj.qq.com/myapp/detail.htm?apkName=com.zzbank.mobile.bank"
		    } else if(system === 'iOS') {
		        window.location = "https://apps.apple.com/cn/app/id571831520"
		    }
		}
	</script>
</html>

